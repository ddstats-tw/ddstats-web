{% extends "player/base.html" %}

{% block player %}
<div class="container left-bigger">
    <div class="box">
        <h2 style="float: left">Last finishes</h2>
        <a class="show-more" href="/player/{{ name | urlencode | safe }}/overview/finishes">Show more</a>
        <table class="transparent">
            <thead>
                <tr>
                    <th>Date</th>
                    <th>Server</th>
                    <th></th>
                    <th>Map</th>
                    <th>Time</th>
                </tr>
            </thead>
            <tbody>
                {% for finish in recent_finishes %}
                <tr>
                    <td>{{ finish.timestamp | date(format="%F %T") }}</td>
                    <td><img height="17rem" src="https://ddnet.org/countryflags/{{ finish.server }}.png"></td>
                    <td>{{ finish.map.server }}</td>
                    <td><a href="/map/{{ finish.map.map | urlencode | safe }}">{{ finish.map.map }}</a></td>
                    <td>{{ finish.time | fancy_time }}</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>

    <div class="box">
        <h2 style="float: left">Favourite partners</h2>
        <a class="show-more" href="/player/{{ name | urlencode | safe }}/overview/partners">Show more</a>
        <table class="transparent">
            <thead>
                <tr>
                    <th>Player</th>
                    <th>Finishes together</th>
                </tr>
            </thead>
            <tbody>
                {% for teammate in favourite_teammates %}
                <tr>
                    <td><a href="/player/{{ teammate.name | urlencode }}">{{ teammate.name }}</a></td>
                    <td>{{ teammate.ranks_together }} rank{{ teammate.ranks_together | pluralize }}</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
</div>

{% endblock %}
